(()=>{var e={12:e=>{e.exports=c,c.default=c,c.stable=d,c.stableStringify=d;var t="[...]",n="[Circular]",r=[],a=[];function i(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function c(e,t,n,c){var f;void 0===c&&(c=i()),s(e,"",0,[],void 0,0,c);try{f=0===a.length?JSON.stringify(e,t,n):JSON.stringify(e,l(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var o=r.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return f}function f(e,t,n,i){var c=Object.getOwnPropertyDescriptor(i,n);void 0!==c.get?c.configurable?(Object.defineProperty(i,n,{value:e}),r.push([i,n,t,c])):a.push([t,n,e]):(i[n]=e,r.push([i,n,t]))}function s(e,r,a,i,c,o,d){var u;if(o+=1,"object"==typeof e&&null!==e){for(u=0;u<i.length;u++)if(i[u]===e)return void f(n,e,r,c);if(void 0!==d.depthLimit&&o>d.depthLimit)return void f(t,e,r,c);if(void 0!==d.edgesLimit&&a+1>d.edgesLimit)return void f(t,e,r,c);if(i.push(e),Array.isArray(e))for(u=0;u<e.length;u++)s(e[u],u,u,i,e,o,d);else{var l=Object.keys(e);for(u=0;u<l.length;u++){var b=l[u];s(e[b],b,u,i,e,o,d)}}i.pop()}}function o(e,t){return e<t?-1:e>t?1:0}function d(e,t,n,c){void 0===c&&(c=i());var f,s=u(e,"",0,[],void 0,0,c)||e;try{f=0===a.length?JSON.stringify(s,t,n):JSON.stringify(s,l(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var o=r.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return f}function u(e,a,i,c,s,d,l){var b;if(d+=1,"object"==typeof e&&null!==e){for(b=0;b<c.length;b++)if(c[b]===e)return void f(n,e,a,s);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==l.depthLimit&&d>l.depthLimit)return void f(t,e,a,s);if(void 0!==l.edgesLimit&&i+1>l.edgesLimit)return void f(t,e,a,s);if(c.push(e),Array.isArray(e))for(b=0;b<e.length;b++)u(e[b],b,b,c,e,d,l);else{var p={},m=Object.keys(e).sort(o);for(b=0;b<m.length;b++){var h=m[b];u(e[h],h,b,c,e,d,l),p[h]=e[h]}if(void 0===s)return p;r.push([s,a,e]),s[a]=p}c.pop()}}function l(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(a.length>0)for(var r=0;r<a.length;r++){var i=a[r];if(i[1]===t&&i[0]===n){n=i[2],a.splice(r,1);break}}return e.call(this,t,n)}}},269:()=>{}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";function e(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}n.r(r),n.d(r,{onRpcRequest:()=>aa});const t=(e,t)=>Object.hasOwnProperty.call(e,t);var a;!function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(a=a||(a={}));function i(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}class c extends TypeError{constructor(e,t){let n;const{message:r,explanation:a,...i}=e,{path:c}=e,f=0===c.length?r:`At path: ${c.join(".")} -- ${r}`;super(a??f),null!=a&&(this.cause=f),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function f(e){return"object"==typeof e&&null!==e}function s(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function o(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:a,branch:i}=t,{type:c}=n,{refinement:f,message:o=`Expected a value of type \`${c}\`${f?` with refinement \`${f}\``:""}, but received: \`${s(r)}\``}=e;return{value:r,type:c,refinement:f,key:a[a.length-1],path:a,branch:i,...e,message:o}}function*d(e,t,n,r){(function(e){return f(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const a of e){const e=o(a,t,n,r);e&&(yield e)}}function*u(e,t,n={}){const{path:r=[],branch:a=[e],coerce:i=!1,mask:c=!1}=n,s={path:r,branch:a};if(i&&(e=t.coercer(e,s),c&&"type"!==t.type&&f(t.schema)&&f(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let o="valid";for(const r of t.validator(e,s))r.explanation=n.message,o="not_valid",yield[r,void 0];for(let[d,l,b]of t.entries(e,s)){const t=u(l,b,{path:void 0===d?r:[...r,d],branch:void 0===d?a:[...a,l],coerce:i,mask:c,message:n.message});for(const n of t)n[0]?(o=null===n[0].refinement||void 0===n[0].refinement?"not_valid":"not_refined",yield[n[0],void 0]):i&&(l=n[1],void 0===d?e=l:e instanceof Map?e.set(d,l):e instanceof Set?e.add(l):f(e)&&(void 0!==l||d in e)&&(e[d]=l))}if("not_valid"!==o)for(const r of t.refiner(e,s))r.explanation=n.message,o="not_refined",yield[r,void 0];"valid"===o&&(yield[void 0,e])}class l{constructor(e){const{type:t,schema:n,validator:r,refiner:a,coercer:i=(e=>e),entries:c=function*(){}}=e;this.type=t,this.schema=n,this.entries=c,this.coercer=i,this.validator=r?(e,t)=>d(r(e,t),t,this,e):()=>[],this.refiner=a?(e,t)=>d(a(e,t),t,this,e):()=>[]}assert(e,t){return b(e,this,t)}create(e,t){return p(e,this,t)}is(e){return m(e,this)}mask(e,t){return function(e,t,n){const r=h(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}(e,this,t)}validate(e,t={}){return h(e,this,t)}}function b(e,t,n){const r=h(e,t,{message:n});if(r[0])throw r[0]}function p(e,t,n){const r=h(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function m(e,t){return!h(e,t)[0]}function h(e,t,n={}){const r=u(e,t,n),a=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(r);if(a[0]){return[new c(a[0],(function*(){for(const e of r)e[0]&&(yield e[0])})),void 0]}return[void 0,a[1]]}function y(...e){const t="type"===e[0]?.type,n=e.map((({schema:e})=>e)),r=Object.assign({},...n);return t?function(e){const t=Object.keys(e);return new l({type:"type",schema:e,*entries(n){if(f(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>f(e)||`Expected an object, but received: ${s(e)}`,coercer:e=>f(e)?{...e}:e})}(r):N(r)}function w(e,t){return new l({type:e,schema:null,validator:t})}function g(e){let t;return new l({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})}function v(e){return new l({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${s(e)}`})}function x(){return w("boolean",(e=>"boolean"==typeof e))}function E(e){const t=s(e),n=typeof e;return new l({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \`${t}\`, but received: ${s(n)}`})}function S(){return w("never",(()=>!1))}function B(e){return new l({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})}function O(){return w("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${s(e)}`))}function N(e){const t=e?Object.keys(e):[],n=S();return new l({type:"object",schema:e??null,*entries(r){if(e&&f(r)){const a=new Set(Object.keys(r));for(const n of t)a.delete(n),yield[n,r[n],e[n]];for(const e of a)yield[e,r[e],n]}},validator:e=>f(e)||`Expected an object, but received: ${s(e)}`,coercer:e=>f(e)?{...e}:e})}function T(e){return new l({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function P(e,t){return new l({type:"record",schema:null,*entries(n){if(f(n))for(const r in n){const a=n[r];yield[r,r,e],yield[r,a,t]}},validator:e=>f(e)||`Expected an object, but received: ${s(e)}`})}function R(){return w("string",(e=>"string"==typeof e||`Expected a string, but received: ${s(e)}`))}function A(e){const t=S();return new l({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let a=0;a<r;a++)yield[a,n[a],e[a]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${s(e)}`})}function q(e){const t=e.map((e=>e.type)).join(" | ");return new l({type:"union",schema:null,coercer(t){for(const n of e){const[e,r]=n.validate(t,{coerce:!0});if(!e)return r}return t},validator(n,r){const a=[];for(const t of e){const[...e]=u(n,t,r),[i]=e;if(!i?.[0])return[];for(const[t]of e)t&&a.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${s(n)}`,...a]}})}function C(){return w("unknown",(()=>!0))}function I(e,t,n){return new l({...e,coercer:(r,a)=>m(r,t)?e.coercer(n(r,a),a):e.coercer(r,a)})}function Z(e){return function(e){return function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)&&"string"==typeof e.message?e.message:null==e?"":String(e)}(e).replace(/\.$/u,"")}function j(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}class M extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}function $(e,t="Assertion failed.",n=M){if(!e){if(t instanceof Error)throw t;throw j(n,t)}}function _(e,t,n="Assertion failed",r=M){try{b(e,t)}catch(e){throw j(r,`${n}: ${Z(e)}.`)}}const F=e=>N(e);function k({path:e,branch:n}){const r=e[e.length-1];return t(n[n.length-2],r)}function U(e){return new l({...e,type:`optional ${e.type}`,validator:(t,n)=>!k(n)||e.validator(t,n),refiner:(t,n)=>!k(n)||e.refiner(t,n)})}const L=q([E(null),x(),w("finite number",(e=>m(e,O())&&Number.isFinite(e))),R(),v(g((()=>L))),P(R(),g((()=>L)))]),D=I(L,w("any",(()=>!0)),(e=>(_(e,L),JSON.parse(JSON.stringify(e,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))))));function z(e){try{return function(e){p(e,D)}(e),!0}catch{return!1}}const G=E("2.0"),J=B(q([O(),R()])),X=F({code:w("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${s(e)}`)),message:R(),data:U(D),stack:U(R())}),V=q([P(R(),D),v(D)]);F({id:J,jsonrpc:G,method:R(),params:U(V)}),F({jsonrpc:G,method:R(),params:U(V)});N({id:J,jsonrpc:G,result:T(C()),error:T(X)});const Y=F({id:J,jsonrpc:G,result:D}),W=F({id:J,jsonrpc:G,error:X});q([Y,W]);function H(e,t){return K(e,"pattern",(n=>t.test(n)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${n}"`))}function K(e,t,n){return new l({...e,*refiner(r,a){yield*e.refiner(r,a);const i=d(n(r,a),a,e,r);for(const e of i)yield{...e,refinement:t}}})}var Q={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},ee={userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901},te={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},ne=Q.internal,re="Unspecified error message. This is a bug, please report it.",ae=(ie(ne),"Unspecified server error.");function ie(e,n=re){if(function(e){return Number.isInteger(e)}(e)){const n=e.toString();if(t(te,n))return te[n].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return ae}return n}function ce(t){return Array.isArray(t)?t.map((t=>z(t)?t:e(t)?fe(t):null)):e(t)?fe(t):z(t)?t:null}function fe(e){return Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return z(r)&&(t[n]=r),t}),{})}var se=n(12),oe=class extends Error{constructor(n,r,a){var i=(...e)=>{super(...e)};if(!Number.isInteger(n))throw new Error('"code" must be an integer.');if(!r||"string"!=typeof r)throw new Error('"message" must be a non-empty string.');!function(n){return e(n)&&t(n,"cause")&&e(n.cause)}(a)?i(r):(i(r,{cause:a.cause}),t(this,"cause")||Object.assign(this,{cause:a.cause})),void 0!==a&&(this.data=a),this.code=n}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,i(this.data)&&(e.data.cause=ce(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return se(this.serialize(),ue,2)}},de=class extends oe{constructor(e,t,n){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}};function ue(e,t){if("[Circular]"!==t)return t}var le=e=>Pe(Q.parse,e),be=e=>Pe(Q.invalidRequest,e),pe=e=>Pe(Q.invalidParams,e),me=e=>Pe(Q.methodNotFound,e),he=e=>Pe(Q.internal,e),ye=e=>Pe(Q.invalidInput,e),we=e=>Pe(Q.resourceNotFound,e),ge=e=>Pe(Q.resourceUnavailable,e),ve=e=>Pe(Q.transactionRejected,e),xe=e=>Pe(Q.methodNotSupported,e),Ee=e=>Pe(Q.limitExceeded,e),Se=e=>Re(ee.userRejectedRequest,e),Be=e=>Re(ee.unauthorized,e),Oe=e=>Re(ee.unsupportedMethod,e),Ne=e=>Re(ee.disconnected,e),Te=e=>Re(ee.chainDisconnected,e);function Pe(e,t){const[n,r]=Ae(t);return new oe(e,n??ie(e),r)}function Re(e,t){const[n,r]=Ae(t);return new de(e,n??ie(e),r)}function Ae(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??void 0,n]}}return[]}H(R(),/^(?:0x)?[0-9a-f]+$/iu),H(R(),/^0x[0-9a-f]+$/iu),H(R(),/^0x[0-9a-f]{40}$/u);const qe=H(R(),/^0x[0-9a-fA-F]{40}$/u);function Ce(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}var Ie,Ze,je,Me,$e=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},_e=(e,t,n)=>($e(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ke=(e,t,n,r)=>($e(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ue=class extends Error{constructor(n,r={}){const a=function(n){if(e(n)&&t(n,"message")&&"string"==typeof n.message)return n.message;return String(n)}(n);super(a),Fe(this,Ie,void 0),Fe(this,Ze,void 0),Fe(this,je,void 0),Fe(this,Me,void 0),ke(this,Ze,a),ke(this,Ie,function(n){if(e(n)&&t(n,"code")&&"number"==typeof n.code&&Number.isInteger(n.code))return n.code;return-32603}(n));const i={...Ge(n),...r};Object.keys(i).length>0&&ke(this,je,i),ke(this,Me,super.stack)}get name(){return"SnapError"}get code(){return _e(this,Ie)}get message(){return _e(this,Ze)}get data(){return _e(this,je)}get stack(){return _e(this,Me)}toJSON(){return{code:De,message:ze,data:{cause:{code:this.code,message:this.message,stack:this.stack,...this.data?{data:this.data}:{}}}}}serialize(){return this.toJSON()}};function Le(e){return class extends Ue{constructor(t,n){if("object"==typeof t){const n=e();return void super({code:n.code,message:n.message,data:t})}const r=e(t);super({code:r.code,message:r.message,data:n})}}}Ie=new WeakMap,Ze=new WeakMap,je=new WeakMap,Me=new WeakMap;var De=-31002,ze="Snap Error";function Ge(n){return e(n)&&t(n,"data")&&"object"==typeof n.data&&null!==n.data&&z(n.data)&&!Array.isArray(n.data)?n.data:{}}function Je(e){return w(JSON.stringify(e),E(e).validator)}function Xe(e){return Je(e)}function Ve(e){return new l({type:"union",schema:null,*entries(n,r){if(!i(n)||!t(n,"type"))return;const{type:a}=n,c=e.find((({schema:e})=>m(a,e.type)));if(c)for(const e of c.entries(n,r))yield e},validator(n,r){const a=e.map((({schema:e})=>e.type.type));if(!i(n)||!t(n,"type")||"string"!=typeof n.type)return`Expected type to be one of: ${a.join(", ")}, but received: undefined`;const{type:c}=n,f=e.find((({schema:e})=>m(c,e.type)));return f?f.validator(n,r):`Expected type to be one of: ${a.join(", ")}, but received: "${c}"`}})}function Ye(e){return function([e,...t]){const n=q([e,...t]);return new l({...n,schema:[e,...t]})}(e)}function We(){return K(R(),"SVG",(e=>!!e.includes("<svg")||"Value is not a valid SVG."))}Le(he),Le(ye),Le(pe),Le(be),Le(Ee);var He=Le(me),Ke=(Le(xe),Le(le),Le(we),Le(ge),Le(ve),Le(Te),Le(Ne),Le(Be),Le(Oe),Le(Se));function Qe(e,t,n=[]){return(...r)=>{if(1===r.length&&i(r[0])){const n={...r[0],type:e};return _(n,t,`Invalid ${e} component`),n}const a=n.reduce(((e,t,n)=>void 0!==r[n]?{...e,[t]:r[n]}:e),{type:e});return _(a,t,`Invalid ${e} component`),a}}var et,tt,nt,rt,at,it=((et=it||{}).Copyable="copyable",et.Divider="divider",et.Heading="heading",et.Panel="panel",et.Spinner="spinner",et.Text="text",et.Image="image",et.Row="row",et.Address="address",et.Button="button",et.Input="input",et.Form="form",et),ct=N({type:R()}),ft=y(ct,N({value:C()})),st=y(ft,N({type:E("address"),value:qe})),ot=(Qe("address",st,["value"]),y(ft,N({type:E("copyable"),value:R(),sensitive:T(x())}))),dt=Qe("copyable",ot,["value","sensitive"]),ut=y(ct,N({type:E("divider")})),lt=(Qe("divider",ut),y(ft,N({type:E("heading"),value:R()}))),bt=Qe("heading",lt,["value"]),pt=y(ct,N({type:E("image"),value:We()})),mt=(Qe("image",pt,["value"]),(tt=mt||{}).Primary="primary",tt.Secondary="secondary",tt),ht=((nt=ht||{}).Button="button",nt.Submit="submit",nt),yt=y(ft,N({type:E("button"),value:R(),variant:T(q([Xe("primary"),Xe("secondary")])),buttonType:T(q([Xe("button"),Xe("submit")])),name:T(R())})),wt=(Qe("button",yt,["value","buttonType","name","variant"]),(rt=wt||{}).Text="text",rt.Number="number",rt.Password="password",rt),gt=y(ft,N({type:E("input"),value:T(R()),name:R(),inputType:T(q([Xe("text"),Xe("password"),Xe("number")])),placeholder:T(R()),label:T(R()),error:T(R())})),vt=(Qe("input",gt,["name","inputType","placeholder","value","label"]),q([gt,yt])),xt=y(ct,N({type:E("form"),children:v(vt),name:R()})),Et=(Qe("form",xt,["name","children"]),y(ft,N({type:E("text"),value:R(),markdown:T(x())}))),St=Qe("text",Et,["value","markdown"]),Bt=((at=Bt||{}).Default="default",at.Critical="critical",at.Warning="warning",at),Ot=q([pt,Et,st]),Nt=y(ft,N({type:E("row"),variant:T(q([Xe("default"),Xe("critical"),Xe("warning")])),label:R(),value:Ot})),Tt=(Qe("row",Nt,["label","value","variant"]),y(ct,N({type:E("spinner")}))),Pt=(Qe("spinner",Tt),y(ct,N({children:v(g((()=>qt)))}))),Rt=y(Pt,N({type:E("panel")})),At=Qe("panel",Rt,["children"]),qt=Ve([ot,ut,lt,pt,Rt,Tt,Et,Nt,st,gt,xt,yt]);var Ct,It,Zt,jt,Mt,$t,_t=((Ct=_t||{}).Critical="critical",Ct),Ft=((It=Ft||{}).ButtonClickEvent="ButtonClickEvent",It.FormSubmitEvent="FormSubmitEvent",It.InputChangeEvent="InputChangeEvent",It.FileUploadEvent="FileUploadEvent",It),kt=N({type:R(),name:T(R())}),Ut=y(kt,N({type:E("ButtonClickEvent"),name:T(R())})),Lt=N({name:R(),size:O(),contentType:R(),contents:R()}),Dt=y(kt,N({type:E("FormSubmitEvent"),value:P(R(),B(q([R(),Lt,x()]))),name:R()})),zt=y(kt,N({type:E("InputChangeEvent"),name:R(),value:q([R(),x()])})),Gt=(q([Ut,Dt,zt,y(kt,N({type:E("FileUploadEvent"),name:R(),file:B(Lt)}))]),(Zt=Gt||{}).Alert="alert",Zt.Confirmation="confirmation",Zt.Prompt="prompt",Zt),Jt=((jt=Jt||{}).Base64="base64",jt.Hex="hex",jt.Utf8="utf8",jt),Xt=((Mt=Xt||{}).ClearState="clear",Mt.GetState="get",Mt.UpdateState="update",Mt),Vt=(($t=Vt||{}).InApp="inApp",$t.Native="native",$t),Yt=Ye([R(),O()]),Wt=Ht([R()]);N({type:R(),props:P(R(),D),key:B(Yt)});function Ht(e){return function(e){const t=Ye([e,v(g((()=>t)))]);return t}(B(Ye([...e,x()])))}function Kt(e,t={}){return N({type:Je(e),props:N(t),key:B(Yt)})}var Qt=Kt("Button",{children:Wt,name:T(R()),type:T(Ye([Je("button"),Je("submit")])),variant:T(Ye([Je("primary"),Je("destructive")])),disabled:T(x())}),en=Kt("Checkbox",{name:R(),checked:T(x()),label:T(R()),variant:T(Ye([Je("default"),Je("toggle")]))}),tn=Kt("Input",{name:R(),type:T(Ye([Je("text"),Je("password"),Je("number")])),value:T(R()),placeholder:T(R())}),nn=Kt("Option",{value:R(),children:R()}),rn=Kt("Dropdown",{name:R(),value:T(R()),children:Ht([nn])}),an=Kt("FileInput",{name:R(),accept:Ye([T(v(R()))]),compact:T(x())}),cn=[tn,Qt],fn=[tn,rn,an,en],sn=(Ye([...fn,...cn]),Ye([A(cn),...fn])),on=Kt("Field",{label:T(R()),error:T(R()),children:sn}),dn=Kt("Form",{children:Ht([on,g((()=>qn))]),name:R()}),un=Kt("Bold",{children:Ht([R(),g((()=>ln))])}),ln=Kt("Italic",{children:Ht([R(),g((()=>un))])}),bn=Ye([un,ln]),pn=Kt("Address",{address:qe}),mn=Kt("Box",{children:Ht([g((()=>qn))]),direction:T(Ye([Je("horizontal"),Je("vertical")])),alignment:T(Ye([Je("start"),Je("center"),Je("end"),Je("space-between"),Je("space-around")]))}),hn=Kt("Footer",{children:Ye([A([Qt,Qt]),Qt])}),yn=Kt("Container",{children:Ye([A([mn,hn]),mn])}),wn=Kt("Copyable",{value:R(),sensitive:T(x())}),gn=Kt("Divider"),vn=Kt("Value",{value:R(),extra:R()}),xn=Kt("Card",{image:T(R()),title:R(),description:T(R()),value:R(),extra:T(R())}),En=Kt("Heading",{children:Wt}),Sn=Kt("Image",{src:We(),alt:T(R())}),Bn=Kt("Link",{href:R(),children:Ht([bn,R()])}),On=Kt("Text",{children:Ht([R(),un,ln,Bn]),alignment:T(Ye([Je("start"),Je("center"),Je("end")]))}),Nn=Ye([On,un,ln,Bn,Sn,x()]),Tn=Ye([On,un,ln,Bn,R()]),Pn=Kt("Tooltip",{children:B(Nn),content:Tn}),Rn=Kt("Row",{label:R(),children:Ye([pn,Sn,On,vn]),variant:T(Ye([Je("default"),Je("warning"),Je("critical")])),tooltip:T(R())}),An=Kt("Spinner"),qn=Ve([pn,un,mn,Qt,wn,gn,rn,an,dn,En,tn,Sn,ln,Bn,Rn,An,On,Pn,en,xn]),Cn=Ye([qn,yn]),In=(Ve([Qt,tn,an,on,dn,un,ln,pn,mn,wn,gn,En,Sn,Bn,Rn,An,On,rn,nn,vn,Pn,en,hn,yn,xn]),q([Lt,R(),x()])),Zn=P(R(),B(In));P(R(),q([Zn,B(In)])),q([qt,Cn]),P(R(),D);const jn=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function Mn(e){return e instanceof Uint8Array}function $n(e){$(Mn(e),"Value must be a Uint8Array.")}function _n(e){if($n(e),0===e.length)return"0x";const t=jn(),n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`}(n.join(""))}function Fn(e){return $("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}var kn,Un,Ln=n(269);const Dn={P:0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,r:0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,h:0x396c8c005555e1568c00aaab0000aaabn,Gx:0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bbn,Gy:0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1n,b:4n,P2:0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn**2n-1n,h2:0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5n,G2x:[0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8n,0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7en],G2y:[0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801n,0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79ben],b2:[4n,4n],x:0xd201000000010000n,h2Eff:0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551n},zn=Vn(Dn.x);function Gn(e,t){const n=e%t;return n>=0n?n:t+n}function Jn(e,t,n){if(n<=0n||t<0n)throw new Error("Expected power/modulo > 0");if(1n===n)return 0n;let r=1n;for(;t>0n;)1n&t&&(r=r*e%n),e=e*e%n,t>>=1n;return r}function Xn(e,t){const n=new Array(t.length),r=t.reduce(((e,t,r)=>t.isZero()?e:(n[r]=e,e.multiply(t))),e.ONE),a=r.invert();return t.reduceRight(((e,t,r)=>t.isZero()?e:(n[r]=e.multiply(n[r]),e.multiply(t))),a),n}function Vn(e){let t;for(t=0;e>0n;e>>=1n,t+=1);return t}function Yn(e,t){return e>>BigInt(t)&1n}function Wn(e,t=Dn.P){const n=0n,r=1n;if(e===n||t<=n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let a=Gn(e,t),i=t,c=n,f=r,s=r,o=n;for(;a!==n;){const e=i/a,t=i%a,n=c-s*e,r=f-o*e;i=a,a=t,c=s,f=o,s=n,o=r}if(i!==r)throw new Error("invert: does not exist");return Gn(c,t)}function Hn(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,a=e.slice(r,r+2);if(2!==a.length)throw new Error("Invalid byte sequence");const i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}function Kn(e,t){const n=Hn(function(e,t){if(!t)throw new Error("byteLength target must be specified");const n=e.toString(16);return(1&n.length?`0${n}`:n).padStart(2*t,"0")}(e,t));if(n.length!==t)throw new Error("numberToBytesBE: wrong byteLength");return n}const Qn=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function er(e){let t="";for(let n=0;n<e.length;n++)t+=Qn[e[n]];return t}function tr(e){return BigInt("0x"+er(e))}function nr(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const a=e[t];n.set(a,r),r+=a.length}return n}class rr{constructor(e){this.value=Gn(e,rr.ORDER)}isZero(){return 0n===this.value}equals(e){return this.value===e.value}negate(){return new rr(-this.value)}invert(){return new rr(Wn(this.value,rr.ORDER))}add(e){return new rr(this.value+e.value)}square(){return new rr(this.value*this.value)}pow(e){return new rr(Jn(this.value,e,rr.ORDER))}sqrt(){const e=this.pow((rr.ORDER+1n)/4n);if(e.square().equals(this))return e}subtract(e){return new rr(this.value-e.value)}multiply(e){return e instanceof rr&&(e=e.value),new rr(this.value*e)}div(e){return"bigint"==typeof e&&(e=new rr(e)),this.multiply(e.invert())}toString(){const e=this.value.toString(16).padStart(96,"0");return e.slice(0,2)+"."+e.slice(-2)}static fromBytes(e){if(e.length!==rr.BYTES_LEN)throw new Error(`fromBytes wrong length=${e.length}`);return new rr(tr(e))}toBytes(){return Kn(this.value,rr.BYTES_LEN)}}kn=rr,rr.ORDER=Dn.P,rr.MAX_BITS=Vn(Dn.P),rr.BYTES_LEN=Math.ceil(kn.MAX_BITS/8),rr.ZERO=new rr(0n),rr.ONE=new rr(1n);class ar{constructor(e){this.value=Gn(e,ar.ORDER)}static isValid(e){return e<=ar.ORDER}isZero(){return 0n===this.value}equals(e){return this.value===e.value}negate(){return new ar(-this.value)}invert(){return new ar(Wn(this.value,ar.ORDER))}add(e){return new ar(this.value+e.value)}square(){return new ar(this.value*this.value)}pow(e){return new ar(Jn(this.value,e,ar.ORDER))}subtract(e){return new ar(this.value-e.value)}multiply(e){return e instanceof ar&&(e=e.value),new ar(this.value*e)}div(e){return"bigint"==typeof e&&(e=new ar(e)),this.multiply(e.invert())}legendre(){return this.pow((ar.ORDER-1n)/2n)}sqrt(){if(!this.legendre().equals(ar.ONE))return;const e=ar.ORDER;let t,n,r;for(t=e-1n,n=0;t%2n===0n;t/=2n,n++);if(1===n)return this.pow((e+1n)/4n);for(r=2n;r<e&&new ar(r).legendre().value!==e-1n;r++);let a=Jn(r,t,e),i=Jn(this.value,(t+1n)/2n,e),c=Jn(this.value,t,e),f=0n;for(;0n!==Gn(c-1n,e);){let t;for(f=Gn(c*c,e),t=1;t<n&&0n!==Gn(f-1n,e);t++)f=Gn(f*f,e);let r=Jn(a,BigInt(1<<n-t-1),e);i=Gn(i*r,e),a=Gn(r*r,e),c=Gn(c*a,e),n=t}return new ar(i)}toString(){return"0x"+this.value.toString(16).padStart(64,"0")}}function ir(e,t,n){if(0n===n)return t;if(1n===n)return e;let r=t,a=e;for(;n>0n;)1n&n&&(r=r.multiply(a)),n>>=1n,a=a.square();return r}ar.ORDER=Dn.r,ar.ZERO=new ar(0n),ar.ONE=new ar(1n);class cr{constructor(e,t){if(this.c0=e,this.c1=t,"bigint"==typeof e)throw new Error("c0: Expected Fp");if("bigint"==typeof t)throw new Error("c1: Expected Fp")}static fromBigTuple(e){const t=e.map((e=>new rr(e)));return new cr(...t)}one(){return cr.ONE}isZero(){return this.c0.isZero()&&this.c1.isZero()}toString(){return`Fp2(${this.c0} + ${this.c1}×i)`}reim(){return{re:this.c0.value,im:this.c1.value}}negate(){const{c0:e,c1:t}=this;return new cr(e.negate(),t.negate())}equals(e){const{c0:t,c1:n}=this,{c0:r,c1:a}=e;return t.equals(r)&&n.equals(a)}add(e){const{c0:t,c1:n}=this,{c0:r,c1:a}=e;return new cr(t.add(r),n.add(a))}subtract(e){const{c0:t,c1:n}=this,{c0:r,c1:a}=e;return new cr(t.subtract(r),n.subtract(a))}multiply(e){const{c0:t,c1:n}=this;if("bigint"==typeof e)return new cr(t.multiply(e),n.multiply(e));const{c0:r,c1:a}=e;let i=t.multiply(r),c=n.multiply(a);return new cr(i.subtract(c),t.add(n).multiply(r.add(a)).subtract(i.add(c)))}pow(e){return ir(this,cr.ONE,e)}div(e){const t="bigint"==typeof e?new rr(e).invert().value:e.invert();return this.multiply(t)}mulByNonresidue(){const e=this.c0,t=this.c1;return new cr(e.subtract(t),e.add(t))}square(){const e=this.c0,t=this.c1,n=e.add(t),r=e.subtract(t),a=e.add(e);return new cr(n.multiply(r),a.multiply(t))}sqrt(){const e=this.pow((cr.ORDER+8n)/16n),t=e.square().div(this),n=Ar,r=[n[0],n[2],n[4],n[6]].find((e=>e.equals(t)));if(!r)return;const a=n.indexOf(r),i=n[a/2];if(!i)throw new Error("Invalid root");const c=e.div(i),f=c.negate(),{re:s,im:o}=c.reim(),{re:d,im:u}=f.reim();return o>u||o===u&&s>d?c:f}invert(){const{re:e,im:t}=this.reim(),n=new rr(e*e+t*t).invert();return new cr(n.multiply(new rr(e)),n.multiply(new rr(-t)))}frobeniusMap(e){return new cr(this.c0,this.c1.multiply(Rr[e%2]))}multiplyByB(){let e=this.c0,t=this.c1,n=e.multiply(4n),r=t.multiply(4n);return new cr(n.subtract(r),n.add(r))}static fromBytes(e){if(e.length!==cr.BYTES_LEN)throw new Error(`fromBytes wrong length=${e.length}`);return new cr(rr.fromBytes(e.subarray(0,rr.BYTES_LEN)),rr.fromBytes(e.subarray(rr.BYTES_LEN)))}toBytes(){return nr(this.c0.toBytes(),this.c1.toBytes())}}Un=cr,cr.ORDER=Dn.P2,cr.MAX_BITS=Vn(Dn.P2),cr.BYTES_LEN=Math.ceil(Un.MAX_BITS/8),cr.ZERO=new cr(rr.ZERO,rr.ZERO),cr.ONE=new cr(rr.ONE,rr.ZERO);class fr{constructor(e,t,n){this.c0=e,this.c1=t,this.c2=n}static fromBigSix(e){if(!Array.isArray(e)||6!==e.length)throw new Error("Invalid Fp6 usage");const t=[e.slice(0,2),e.slice(2,4),e.slice(4,6)].map((e=>cr.fromBigTuple(e)));return new fr(...t)}fromTriple(e){return new fr(...e)}one(){return fr.ONE}isZero(){return this.c0.isZero()&&this.c1.isZero()&&this.c2.isZero()}negate(){const{c0:e,c1:t,c2:n}=this;return new fr(e.negate(),t.negate(),n.negate())}toString(){return`Fp6(${this.c0} + ${this.c1} * v, ${this.c2} * v^2)`}equals(e){const{c0:t,c1:n,c2:r}=this,{c0:a,c1:i,c2:c}=e;return t.equals(a)&&n.equals(i)&&r.equals(c)}add(e){const{c0:t,c1:n,c2:r}=this,{c0:a,c1:i,c2:c}=e;return new fr(t.add(a),n.add(i),r.add(c))}subtract(e){const{c0:t,c1:n,c2:r}=this,{c0:a,c1:i,c2:c}=e;return new fr(t.subtract(a),n.subtract(i),r.subtract(c))}multiply(e){if("bigint"==typeof e)return new fr(this.c0.multiply(e),this.c1.multiply(e),this.c2.multiply(e));let{c0:t,c1:n,c2:r}=this,{c0:a,c1:i,c2:c}=e,f=t.multiply(a),s=n.multiply(i),o=r.multiply(c);return new fr(f.add(n.add(r).multiply(i.add(c)).subtract(s.add(o)).mulByNonresidue()),t.add(n).multiply(a.add(i)).subtract(f.add(s)).add(o.mulByNonresidue()),s.add(t.add(r).multiply(a.add(c)).subtract(f.add(o))))}pow(e){return ir(this,fr.ONE,e)}div(e){const t="bigint"==typeof e?new rr(e).invert().value:e.invert();return this.multiply(t)}mulByNonresidue(){return new fr(this.c2.mulByNonresidue(),this.c0,this.c1)}multiplyBy1(e){return new fr(this.c2.multiply(e).mulByNonresidue(),this.c0.multiply(e),this.c1.multiply(e))}multiplyBy01(e,t){let{c0:n,c1:r,c2:a}=this,i=n.multiply(e),c=r.multiply(t);return new fr(r.add(a).multiply(t).subtract(c).mulByNonresidue().add(i),e.add(t).multiply(n.add(r)).subtract(i).subtract(c),n.add(a).multiply(e).subtract(i).add(c))}multiplyByFp2(e){let{c0:t,c1:n,c2:r}=this;return new fr(t.multiply(e),n.multiply(e),r.multiply(e))}square(){let{c0:e,c1:t,c2:n}=this,r=e.square(),a=e.multiply(t).multiply(2n),i=t.multiply(n).multiply(2n),c=n.square();return new fr(i.mulByNonresidue().add(r),c.mulByNonresidue().add(a),a.add(e.subtract(t).add(n).square()).add(i).subtract(r).subtract(c))}invert(){let{c0:e,c1:t,c2:n}=this,r=e.square().subtract(n.multiply(t).mulByNonresidue()),a=n.square().mulByNonresidue().subtract(e.multiply(t)),i=t.square().subtract(e.multiply(n)),c=n.multiply(a).add(t.multiply(i)).mulByNonresidue().add(e.multiply(r)).invert();return new fr(c.multiply(r),c.multiply(a),c.multiply(i))}frobeniusMap(e){return new fr(this.c0.frobeniusMap(e),this.c1.frobeniusMap(e).multiply(Cr[e%6]),this.c2.frobeniusMap(e).multiply(Ir[e%6]))}static fromBytes(e){if(e.length!==fr.BYTES_LEN)throw new Error(`fromBytes wrong length=${e.length}`);return new fr(cr.fromBytes(e.subarray(0,cr.BYTES_LEN)),cr.fromBytes(e.subarray(cr.BYTES_LEN,2*cr.BYTES_LEN)),cr.fromBytes(e.subarray(2*cr.BYTES_LEN)))}toBytes(){return nr(this.c0.toBytes(),this.c1.toBytes(),this.c2.toBytes())}}fr.ZERO=new fr(cr.ZERO,cr.ZERO,cr.ZERO),fr.ONE=new fr(cr.ONE,cr.ZERO,cr.ZERO),fr.BYTES_LEN=3*cr.BYTES_LEN;class sr{constructor(e,t){this.c0=e,this.c1=t}static fromBigTwelve(e){return new sr(fr.fromBigSix(e.slice(0,6)),fr.fromBigSix(e.slice(6,12)))}fromTuple(e){return new sr(...e)}one(){return sr.ONE}isZero(){return this.c0.isZero()&&this.c1.isZero()}toString(){return`Fp12(${this.c0} + ${this.c1} * w)`}negate(){const{c0:e,c1:t}=this;return new sr(e.negate(),t.negate())}equals(e){const{c0:t,c1:n}=this,{c0:r,c1:a}=e;return t.equals(r)&&n.equals(a)}add(e){const{c0:t,c1:n}=this,{c0:r,c1:a}=e;return new sr(t.add(r),n.add(a))}subtract(e){const{c0:t,c1:n}=this,{c0:r,c1:a}=e;return new sr(t.subtract(r),n.subtract(a))}multiply(e){if("bigint"==typeof e)return new sr(this.c0.multiply(e),this.c1.multiply(e));let{c0:t,c1:n}=this,{c0:r,c1:a}=e,i=t.multiply(r),c=n.multiply(a);return new sr(i.add(c.mulByNonresidue()),t.add(n).multiply(r.add(a)).subtract(i.add(c)))}pow(e){return ir(this,sr.ONE,e)}div(e){const t="bigint"==typeof e?new rr(e).invert().value:e.invert();return this.multiply(t)}multiplyBy014(e,t,n){let{c0:r,c1:a}=this,i=r.multiplyBy01(e,t),c=a.multiplyBy1(n);return new sr(c.mulByNonresidue().add(i),a.add(r).multiplyBy01(e,t.add(n)).subtract(i).subtract(c))}multiplyByFp2(e){return new sr(this.c0.multiplyByFp2(e),this.c1.multiplyByFp2(e))}square(){let{c0:e,c1:t}=this,n=e.multiply(t);return new sr(t.mulByNonresidue().add(e).multiply(e.add(t)).subtract(n).subtract(n.mulByNonresidue()),n.add(n))}invert(){let{c0:e,c1:t}=this,n=e.square().subtract(t.square().mulByNonresidue()).invert();return new sr(e.multiply(n),t.multiply(n).negate())}conjugate(){return new sr(this.c0,this.c1.negate())}frobeniusMap(e){const t=this.c0.frobeniusMap(e),{c0:n,c1:r,c2:a}=this.c1.frobeniusMap(e),i=Zr[e%12];return new sr(t,new fr(n.multiply(i),r.multiply(i),a.multiply(i)))}Fp4Square(e,t){const n=e.square(),r=t.square();return{first:r.mulByNonresidue().add(n),second:e.add(t).square().subtract(n).subtract(r)}}cyclotomicSquare(){const{c0:e,c1:t,c2:n}=this.c0,{c0:r,c1:a,c2:i}=this.c1,{first:c,second:f}=this.Fp4Square(e,a),{first:s,second:o}=this.Fp4Square(r,n),{first:d,second:u}=this.Fp4Square(t,i);let l=u.mulByNonresidue();return new sr(new fr(c.subtract(e).multiply(2n).add(c),s.subtract(t).multiply(2n).add(s),d.subtract(n).multiply(2n).add(d)),new fr(l.add(r).multiply(2n).add(l),f.add(a).multiply(2n).add(f),o.add(i).multiply(2n).add(o)))}cyclotomicExp(e){let t=sr.ONE;for(let n=zn-1;n>=0;n--)t=t.cyclotomicSquare(),Yn(e,n)&&(t=t.multiply(this));return t}finalExponentiate(){const{x:e}=Dn,t=this.frobeniusMap(6).div(this),n=t.frobeniusMap(2).multiply(t),r=n.cyclotomicExp(e).conjugate(),a=n.cyclotomicSquare().conjugate().multiply(r),i=a.cyclotomicExp(e).conjugate(),c=i.cyclotomicExp(e).conjugate(),f=c.cyclotomicExp(e).conjugate().multiply(r.cyclotomicSquare()),s=f.cyclotomicExp(e).conjugate(),o=r.multiply(c).frobeniusMap(2),d=i.multiply(n).frobeniusMap(3),u=f.multiply(n.conjugate()).frobeniusMap(1),l=s.multiply(a.conjugate()).multiply(n);return o.multiply(d).multiply(u).multiply(l)}static fromBytes(e){if(e.length!==sr.BYTES_LEN)throw new Error(`fromBytes wrong length=${e.length}`);return new sr(fr.fromBytes(e.subarray(0,fr.BYTES_LEN)),fr.fromBytes(e.subarray(fr.BYTES_LEN)))}toBytes(){return nr(this.c0.toBytes(),this.c1.toBytes())}}sr.ZERO=new sr(fr.ZERO,fr.ZERO),sr.ONE=new sr(fr.ONE,fr.ZERO),sr.BYTES_LEN=2*fr.BYTES_LEN;class or{constructor(e,t,n,r){this.x=e,this.y=t,this.z=n,this.C=r}isZero(){return this.z.isZero()}createPoint(e,t,n){return new this.constructor(e,t,n)}getZero(){return this.createPoint(this.C.ONE,this.C.ONE,this.C.ZERO)}equals(e){if(this.constructor!==e.constructor)throw new Error(`ProjectivePoint#equals: this is ${this.constructor}, but rhs is ${e.constructor}`);const t=this,n=e,r=t.x.multiply(n.z).equals(n.x.multiply(t.z)),a=t.y.multiply(n.z).equals(n.y.multiply(t.z));return r&&a}negate(){return this.createPoint(this.x,this.y.negate(),this.z)}toString(e=!0){if(this.isZero())return"Point<Zero>";if(!e)return`Point<x=${this.x}, y=${this.y}, z=${this.z}>`;const[t,n]=this.toAffine();return`Point<x=${t}, y=${n}>`}fromAffineTuple(e){return this.createPoint(e[0],e[1],this.C.ONE)}toAffine(e=this.z.invert()){if(e.isZero())throw new Error("Invalid inverted z");return[this.x.multiply(e),this.y.multiply(e)]}toAffineBatch(e){const t=Xn(this.C,e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}normalizeZ(e){return this.toAffineBatch(e).map((e=>this.fromAffineTuple(e)))}double(){const{x:e,y:t,z:n}=this,r=e.multiply(e).multiply(3n),a=t.multiply(n),i=a.multiply(a),c=i.multiply(a),f=e.multiply(t).multiply(a),s=r.multiply(r).subtract(f.multiply(8n)),o=s.multiply(a).multiply(2n),d=r.multiply(f.multiply(4n).subtract(s)).subtract(t.multiply(t).multiply(8n).multiply(i)),u=c.multiply(8n);return this.createPoint(o,d,u)}add(e){if(this.constructor!==e.constructor)throw new Error(`ProjectivePoint#add: this is ${this.constructor}, but rhs is ${e.constructor}`);const t=this,n=e;if(t.isZero())return n;if(n.isZero())return t;const r=t.x,a=t.y,i=t.z,c=n.x,f=n.y,s=n.z,o=f.multiply(i),d=a.multiply(s),u=c.multiply(i),l=r.multiply(s);if(u.equals(l)&&o.equals(d))return this.double();if(u.equals(l))return this.getZero();const b=o.subtract(d),p=u.subtract(l),m=p.multiply(p),h=m.multiply(p),y=l.multiply(m),w=i.multiply(s),g=b.multiply(b).multiply(w).subtract(h).subtract(y.multiply(2n)),v=p.multiply(g),x=b.multiply(y.subtract(g)).subtract(h.multiply(d)),E=h.multiply(w);return this.createPoint(v,x,E)}subtract(e){if(this.constructor!==e.constructor)throw new Error(`ProjectivePoint#subtract: this is ${this.constructor}, but rhs is ${e.constructor}`);return this.add(e.negate())}validateScalar(e){if("number"==typeof e&&(e=BigInt(e)),"bigint"!=typeof e||e<=0||e>Dn.r)throw new Error(`Point#multiply: invalid scalar, expected positive integer < CURVE.r. Got: ${e}`);return e}multiplyUnsafe(e){let t=this.validateScalar(e),n=this.getZero(),r=this;for(;t>0n;)1n&t&&(n=n.add(r)),r=r.double(),t>>=1n;return n}multiply(e){let t=this.validateScalar(e),n=this.getZero(),r=this.getZero(),a=this,i=rr.ORDER;for(;i>0n;)1n&t?n=n.add(a):r=r.add(a),a=a.double(),t>>=1n,i>>=1n;return n}maxBits(){return this.C.MAX_BITS}precomputeWindow(e){const t=Math.ceil(this.maxBits()/e),n=2**(e-1);let r=[],a=this,i=a;for(let e=0;e<t;e++){i=a,r.push(i);for(let e=1;e<n;e++)i=i.add(a),r.push(i);a=i.double()}return r}calcMultiplyPrecomputes(e){if(this._MPRECOMPUTES)throw new Error("This point already has precomputes");this._MPRECOMPUTES=[e,this.normalizeZ(this.precomputeWindow(e))]}clearMultiplyPrecomputes(){this._MPRECOMPUTES=void 0}wNAF(e){let t,n;this._MPRECOMPUTES?[t,n]=this._MPRECOMPUTES:(t=1,n=this.precomputeWindow(t));let r=this.getZero(),a=this.getZero();const i=Math.ceil(this.maxBits()/t),c=2**(t-1),f=BigInt(2**t-1),s=2**t,o=BigInt(t);for(let t=0;t<i;t++){const i=t*c;let d=Number(e&f);if(e>>=o,d>c&&(d-=s,e+=1n),0===d)a=a.add(t%2?n[i].negate():n[i]);else{const e=n[i+Math.abs(d)-1];r=r.add(d<0?e.negate():e)}}return[r,a]}multiplyPrecomputed(e){return this.wNAF(this.validateScalar(e))[0]}}function dr(e){const{re:t,im:n}=e.reim();return BigInt(t%2n||0n===t&&n%2n)}function ur(e){return Boolean(e.value%2n)}const lr=(Dn.P**2n-9n)/16n;function br(e){const t=new cr(new rr(0n),new rr(240n)),n=new cr(new rr(1012n),new rr(1012n)),r=new cr(new rr(-2n),new rr(-1n));Array.isArray(e)&&(e=cr.fromBigTuple(e));const a=e.pow(2n),i=r.multiply(a),c=i.add(i.pow(2n));let f=t.multiply(c).negate(),s=n.multiply(c.add(cr.ONE));f.isZero()&&(f=r.multiply(t));let o=f.pow(3n),d=s.pow(3n).add(t.multiply(s).multiply(f.pow(2n))).add(n.multiply(o));const{success:u,sqrtCandidateOrGamma:l}=function(e,t){const n=t.pow(7n),r=e.multiply(n),a=r.multiply(n.multiply(t)).pow(lr).multiply(r);let i=!1,c=a;return Ar.slice(0,4).forEach((n=>{const r=n.multiply(a);r.pow(2n).multiply(t).subtract(e).isZero()&&!i&&(i=!0,c=r)})),{success:i,sqrtCandidateOrGamma:c}}(d,o);let b;u&&(b=l);const p=l.multiply(e.pow(3n));d=i.pow(3n).multiply(d);let m=!1;if(qr.forEach((e=>{const t=e.multiply(p);!t.pow(2n).multiply(o).subtract(d).isZero()||u||m||(b=t,m=!0)})),!u&&!m)throw new Error("Hash to Curve - Optimized SWU failure");return m&&(s=s.multiply(i)),dr(e)!==dr(b)&&(b=b.negate()),[s.div(f),b]}function pr(e){const t=new rr(0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1dn),n=new rr(0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0n),r=new rr(11n),a=(rr.ORDER-3n)/4n,i=r.negate().pow(3n).sqrt(),c=e.square(),f=r.multiply(c);let s=f.square().add(f);const o=s.add(rr.ONE).multiply(n),d=f.multiply(o);s=t.negate().multiply(s),s.isZero()&&(s=t.multiply(r));let u=s.square();const l=u.multiply(s);u=t.multiply(u);let b=o.square().add(u).multiply(o);u=n.multiply(l),b=b.add(u),u=b.multiply(l);const p=l.square().multiply(u).pow(a).multiply(u),m=p.multiply(i).multiply(c).multiply(e);let h,y;p.square().multiply(l).equals(b)?(h=o,y=p):(h=d,y=m);const w=y.negate(),g=ur(e)==ur(y)?y:w;return[h.div(s),g]}function mr(e,t,n){const[r,a,i,c]=e.map((e=>e.reduce(((e,n)=>e.multiply(t).add(n)))));return t=r.div(a),n=n.multiply(i.div(c)),[t,n]}const hr=(e,t)=>mr(jr,e,t),yr=(e,t)=>mr(Mr,e,t);const wr=new fr(cr.ZERO,cr.ONE,cr.ZERO),gr=new sr(wr,fr.ZERO),vr=new sr(fr.ZERO,wr),[xr,Er]=Xn(sr,[gr,vr]);const Sr=0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,Br=0x6af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09n,Or=0x699be3b8c6870965e5bf892ad5d2cc7b0e85a117402dfd83b7f4a947e02d978498255a2aaec0ac627b5afbdf1bf1c90n,Nr=0x8157cd83046453f5dd0972b6e3949e4288020b5b8a9cc99ca07e27089a2ce2436d965026adad3ef7baba37f2183e9b5n,Tr=0xab1c2ffdd6c253ca155231eb3e71ba044fd562f6f72bc5bad5ec46a0b7a3b0247cf08ce6c6317f40edbc653a72dee17n,Pr=0xaa404866706722864480885d68ad0ccac1967c7544b447873cc37e0181271e006df72162a3d3e0287bf597fbf7f8fc1n,Rr=[0x1n,0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaan].map((e=>new rr(e))),Ar=[[1n,0n],[Br,-Br],[0n,1n],[Br,Br],[-1n,0n],[-Br,Br],[0n,-1n],[-Br,-Br]].map((e=>cr.fromBigTuple(e))),qr=[[Or,Nr],[-Nr,Or],[Tr,Pr],[-Pr,Tr]].map((e=>cr.fromBigTuple(e))),Cr=[[0x1n,0x0n],[0x0n,0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn],[0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0x0n],[0x0n,0x1n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0x0n],[0x0n,0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen]].map((e=>cr.fromBigTuple(e))),Ir=[[0x1n,0x0n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaadn,0x0n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0x0n],[0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaan,0x0n],[0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0x0n],[0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffffn,0x0n]].map((e=>cr.fromBigTuple(e))),Zr=[[0x1n,0x0n],[0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8n,0x00fc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3n],[0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffffn,0x0n],[0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n,0x06af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09n],[0x00000000000000005f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0x0n],[0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995n,0x05b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116n],[0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaan,0x0n],[0x00fc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3n,0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0x0n],[0x06af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09n,0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaadn,0x0n],[0x05b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116n,0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995n]].map((e=>cr.fromBigTuple(e))),jr=[[[0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1n,0x0n],[0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71en,0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38dn],[0x0n,0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71an],[0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6n,0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6n]].map((e=>cr.fromBigTuple(e))),[[0x0n,0x0n],[0x1n,0x0n],[0xcn,0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9fn],[0x0n,0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63n]].map((e=>cr.fromBigTuple(e))),[[0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10n,0x0n],[0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71cn,0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38fn],[0x0n,0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97ben],[0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706n,0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706n]].map((e=>cr.fromBigTuple(e))),[[0x1n,0x0n],[0x12n,0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99n],[0x0n,0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3n],[0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fbn,0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fbn]].map((e=>cr.fromBigTuple(e)))],Mr=[[new rr(0x06e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229n),new rr(0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7bn),new rr(0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9en),new rr(0x080d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317n),new rr(0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88en),new rr(0x0d6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84n),new rr(0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983n),new rr(0x0e99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9n),new rr(0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861n),new rr(0x0d54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0n),new rr(0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bbn),new rr(0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7n)],[new rr(0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001n),new rr(0x095fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0an),new rr(0x0a10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641n),new rr(0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5en),new rr(0x0772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3an),new rr(0x0e7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5n),new rr(0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21en),new rr(0x03425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8n),new rr(0x0b2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19n),new rr(0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bffn),new rr(0x08ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1cn)],[new rr(0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604n),new rr(0x05c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224bn),new rr(0x0245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133n),new rr(0x0b182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8n),new rr(0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8en),new rr(0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132n),new rr(0x0e1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30n),new rr(0x09fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587n),new rr(0x0987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29n),new rr(0x04ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2n),new rr(0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0n),new rr(0x08cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedbn),new rr(0x01f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cbn),new rr(0x00cc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6n),new rr(0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696n),new rr(0x090d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33n)],[new rr(0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001n),new rr(0x0e0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8fn),new rr(0x02660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7n),new rr(0x0ad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345ccn),new rr(0x0accbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092n),new rr(0x04d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8n),new rr(0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55n),new rr(0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4an),new rr(0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9n),new rr(0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775cn),new rr(0x08d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7acn),new rr(0x0be0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001dn),new rr(0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416n),new rr(0x058df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2n),new rr(0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03dn),new rr(0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1n)]],$r=2n**381n,_r=2n*$r,Fr=2n*_r,kr=48;const Ur=function(e,t){let n=t;return n.outputLen=e,n}(32,(async e=>{if(Dr.web){const t=await Dr.web.subtle.digest("SHA-256",e.buffer);return new Uint8Array(t)}if(Dr.node)return Uint8Array.from(Dr.node.createHash("sha256").update(e).digest());throw new Error("The environment doesn't have sha256 function")})),Lr={DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:Dn.P,m:2,k:128,expand:!0,hash:Ur};const Dr={node:Ln,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},zr={hashToField:Kr,expandMessageXMD:Hr,hashToPrivateKey:e=>{if((e=Jr(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const t=Gn(tr(e),Dn.r);if(0n===t||1n===t)throw new Error("Invalid private key");return function(e){const t=32,n=e.toString(16).padStart(2*t,"0");return Hn(n)}(t)},stringToBytes:Xr,bytesToHex:er,hexToBytes:Hn,randomBytes:(e=32)=>{if(Dr.web)return Dr.web.getRandomValues(new Uint8Array(e));if(Dr.node){const{randomBytes:t}=Dr.node;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>zr.hashToPrivateKey(zr.randomBytes(40)),sha256:Ur,mod:Gn,getDSTLabel:()=>Lr.DST,setDSTLabel(e){if("string"!=typeof e||e.length>2048||0===e.length)throw new TypeError("Invalid DST");Lr.DST=e}};function Gr(e,t){if("bigint"!=typeof e||e<0n)throw new Error("Expected valid bigint");if("number"!=typeof t)throw new TypeError("Expected valid padding");return e.toString(16).padStart(2*t,"0")}function Jr(e){return e instanceof Uint8Array?Uint8Array.from(e):Hn(e)}function Xr(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function Vr(e){let t=0n;for(let n=0;n<e.length;n++)t<<=8n,t+=BigInt(e[n]);return t}function Yr(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function Wr(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}async function Hr(e,t,n,r=zr.sha256){t.length>255&&(t=await r(nr(Xr("H2C-OVERSIZE-DST-"),t)));const a=r.outputLen,i=2*a,c=Math.ceil(n/a);if(c>255)throw new Error("Invalid xmd length");const f=nr(t,Yr(t.length,1)),s=Yr(0,i),o=Yr(n,2),d=new Array(c),u=await r(nr(s,e,o,Yr(0,1),f));d[0]=await r(nr(u,Yr(1,1),f));for(let e=1;e<=c;e++){const t=[Wr(u,d[e-1]),Yr(e+1,1),f];d[e]=await r(nr(...t))}return nr(...d).slice(0,n)}async function Kr(e,t,n={}){const r={...Lr,...n},a=r.p.toString(2).length,i=Math.ceil((a+r.k)/8),c=t*r.m*i,f=Xr(r.DST);let s=e;r.expand&&(s=await Hr(e,f,c,r.hash));const o=new Array(t);for(let e=0;e<t;e++){const t=new Array(r.m);for(let n=0;n<r.m;n++){const a=i*(n+e*r.m),c=s.subarray(a,a+i);t[n]=Gn(Vr(c),r.p)}o[e]=t}return o}function Qr(e){let t;if(e instanceof Uint8Array&&32===e.length)t=tr(e);else if("string"==typeof e&&64===e.length)t=BigInt(`0x${e}`);else if("number"==typeof e&&e>0&&Number.isSafeInteger(e))t=BigInt(e);else{if(!("bigint"==typeof e&&e>0n))throw new TypeError("Expected valid private key");t=e}if(t=Gn(t,Dn.r),!(0<(n=t)&&n<Dn.r))throw new Error("Private key must be 0 < key < CURVE.r");var n;return t}function ea(e,t){if(!(e instanceof t))throw new Error("Expected Fp* argument, not number/bigint")}class ta extends or{constructor(e,t,n=rr.ONE){super(e,t,n,rr),ea(e,rr),ea(t,rr),ea(n,rr)}static fromHex(e){let t;if(48===(e=Jr(e)).length){const{P:n}=Dn,r=tr(e);if(1n===Gn(r,Fr)/_r)return this.ZERO;const a=new rr(Gn(r,$r));let i=a.pow(3n).add(new rr(Dn.b)).sqrt();if(!i)throw new Error("Invalid compressed G1 point");const c=Gn(r,_r)/$r;2n*i.value/n!==c&&(i=i.negate()),t=new ta(a,i)}else{if(96!==e.length)throw new Error("Invalid point G1, expected 48/96 bytes");{if(0!=(64&e[0]))return ta.ZERO;const n=tr(e.slice(0,kr)),r=tr(e.slice(kr));t=new ta(new rr(n),new rr(r))}}return t.assertValidity(),t}static async hashToCurve(e,t){e=Jr(e);const[[n],[r]]=await Kr(e,2,{m:1,...t}),[a,i]=pr(new rr(n)),[c,f]=pr(new rr(r)),[s,o]=new ta(a,i).add(new ta(c,f)).toAffine(),[d,u]=yr(s,o);return new ta(d,u).clearCofactor()}static async encodeToCurve(e,t){e=Jr(e);const n=await Kr(e,1,{m:1,...t}),[r,a]=pr(new rr(n[0][0])),[i,c]=yr(r,a);return new ta(i,c).clearCofactor()}static fromPrivateKey(e){return this.BASE.multiplyPrecomputed(Qr(e))}toRawBytes(e=!1){return Hn(this.toHex(e))}toHex(e=!1){if(this.assertValidity(),e){const{P:e}=Dn;let t;if(this.isZero())t=Fr+_r;else{const[n,r]=this.toAffine(),a=2n*r.value/e;t=n.value+a*$r+Fr}return Gr(t,kr)}if(this.isZero())return"4".padEnd(192,"0");{const[e,t]=this.toAffine();return Gr(e.value,kr)+Gr(t.value,kr)}}assertValidity(){if(this.isZero())return this;if(!this.isOnCurve())throw new Error("Invalid G1 point: not on curve Fp");if(!this.isTorsionFree())throw new Error("Invalid G1 point: must be of prime-order subgroup");return this}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}millerLoop(e){return function(e,t){const n=t[0].value,r=t[1].value;let a=sr.ONE;for(let t=0,i=zn-2;i>=0;i--,t++){const c=e[t];if(a=a.multiplyBy014(c[0],c[1].multiply(n),c[2].multiply(r)),Yn(Dn.x,i)){t+=1;const i=e[t];a=a.multiplyBy014(i[0],i[1].multiply(n),i[2].multiply(r))}0!==i&&(a=a.square())}return a.conjugate()}(e.pairingPrecomputes(),this.toAffine())}clearCofactor(){return this.mulCurveMinusX().add(this)}isOnCurve(){const e=new rr(Dn.b),{x:t,y:n,z:r}=this,a=n.pow(2n).multiply(r).subtract(t.pow(3n)),i=e.multiply(r.pow(3n));return a.subtract(i).isZero()}sigma(){const[e,t]=this.toAffine();return new ta(e.multiply(0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn),t)}phi(){return new ta(this.x.multiply(0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen),this.y,this.z)}mulCurveX(){return this.multiplyUnsafe(Dn.x).negate()}mulCurveMinusX(){return this.multiplyUnsafe(Dn.x)}isTorsionFree(){return this.mulCurveX().mulCurveMinusX().equals(this.phi())}}ta.BASE=new ta(new rr(Dn.Gx),new rr(Dn.Gy),rr.ONE),ta.ZERO=new ta(rr.ONE,rr.ONE,rr.ZERO);class na extends or{constructor(e,t,n=cr.ONE){super(e,t,n,cr),ea(e,cr),ea(t,cr),ea(n,cr)}static async hashToCurve(e,t){e=Jr(e);const n=await Kr(e,2,t),[r,a]=br(cr.fromBigTuple(n[0])),[i,c]=br(cr.fromBigTuple(n[1])),[f,s]=new na(r,a).add(new na(i,c)).toAffine(),[o,d]=hr(f,s);return new na(o,d).clearCofactor()}static async encodeToCurve(e,t){e=Jr(e);const n=await Kr(e,1,t),[r,a]=br(cr.fromBigTuple(n[0])),[i,c]=hr(r,a);return new na(i,c).clearCofactor()}static fromSignature(e){e=Jr(e);const{P:t}=Dn,n=e.length/2;if(48!==n&&96!==n)throw new Error("Invalid compressed signature length, must be 96 or 192");const r=tr(e.slice(0,n)),a=tr(e.slice(n));if(1n===Gn(r,Fr)/_r)return this.ZERO;const i=new rr(r%$r),c=new rr(a),f=new cr(c,i);let s=f.pow(3n).add(cr.fromBigTuple(Dn.b2)).sqrt();if(!s)throw new Error("Failed to find a square root");const{re:o,im:d}=s.reim(),u=r%_r/$r;(d>0n&&2n*d/t!==u||0n===d&&2n*o/t!==u)&&(s=s.multiply(-1n));const l=new na(f,s,cr.ONE);return l.assertValidity(),l}static fromHex(e){const t=224&(e=Jr(e))[0];if(32===t||96===t||224===t)throw new Error("Invalid encoding flag: "+t);const n=128&t,r=64&t,a=32&t;let i;if(96===e.length&&n){const{P:t,b2:n}=Dn,i=cr.fromBigTuple(n);if(e[0]=31&e[0],r){if(e.reduce(((e,t)=>0!==e?t+1:t),0)>0)throw new Error("Invalid compressed G2 point");return na.ZERO}const c=tr(e.slice(0,kr)),f=tr(e.slice(kr)),s=new cr(new rr(f),new rr(c));let o=s.pow(3n).add(i).sqrt();if(!o)throw new Error("Invalid compressed G2 point");const d=0n===o.c1.value?2n*o.c0.value/t:2n*o.c1.value/t?1n:0n;return o=a>0&&d>0?o:o.negate(),new na(s,o)}if(192!==e.length||n)throw new Error("Invalid point G2, expected 96/192 bytes");{if(0!=(64&e[0]))return na.ZERO;const t=tr(e.slice(0,kr)),n=tr(e.slice(kr,96)),r=tr(e.slice(96,144)),a=tr(e.slice(144));i=new na(cr.fromBigTuple([n,t]),cr.fromBigTuple([a,r]))}return i.assertValidity(),i}static fromPrivateKey(e){return this.BASE.multiplyPrecomputed(Qr(e))}toSignature(){if(this.equals(na.ZERO)){return Hn(Gr(Fr+_r,kr)+Gr(0n,kr))}const[{re:e,im:t},{re:n,im:r}]=this.toAffine().map((e=>e.reim())),a=e;return Hn(Gr(t+(r>0n?2n*r:2n*n)/Dn.P*$r+Fr,kr)+Gr(a,kr))}toRawBytes(e=!1){return Hn(this.toHex(e))}toHex(e=!1){if(this.assertValidity(),e){const{P:e}=Dn;let t=0n,n=0n;if(this.isZero())t=Fr+_r;else{const[r,a]=this.toAffine(),i=0n===a.c1.value?2n*a.c0.value/e:2n*a.c1.value/e?1n:0n;t=r.c1.value+i*$r+Fr,n=r.c0.value}return Gr(t,kr)+Gr(n,kr)}{if(this.equals(na.ZERO))return"4".padEnd(384,"0");const[{re:e,im:t},{re:n,im:r}]=this.toAffine().map((e=>e.reim()));return Gr(t,kr)+Gr(e,kr)+Gr(r,kr)+Gr(n,kr)}}assertValidity(){if(this.isZero())return this;if(!this.isOnCurve())throw new Error("Invalid G2 point: not on curve Fp2");if(!this.isTorsionFree())throw new Error("Invalid G2 point: must be of prime-order subgroup");return this}psi(){return this.fromAffineTuple(function(e,t){return[xr.multiplyByFp2(e).frobeniusMap(1).multiply(gr).c0.c0,Er.multiplyByFp2(t).frobeniusMap(1).multiply(vr).c0.c0]}(...this.toAffine()))}psi2(){return this.fromAffineTuple(function(e,t){return[e.multiply(Sr),t.negate()]}(...this.toAffine()))}mulCurveX(){return this.multiplyUnsafe(Dn.x).negate()}clearCofactor(){const e=this;let t=e.mulCurveX(),n=e.psi(),r=e.double();r=r.psi2(),r=r.subtract(n),n=t.add(n),n=n.mulCurveX(),r=r.add(n),r=r.subtract(t);return r.subtract(e)}isOnCurve(){const e=cr.fromBigTuple(Dn.b2),{x:t,y:n,z:r}=this,a=n.pow(2n).multiply(r).subtract(t.pow(3n)),i=e.multiply(r.pow(3n));return a.subtract(i).isZero()}isTorsionFree(){return this.mulCurveX().equals(this.psi())}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}clearPairingPrecomputes(){this._PPRECOMPUTES=void 0}pairingPrecomputes(){return this._PPRECOMPUTES||(this._PPRECOMPUTES=function(e,t){const n=e,r=t;let a=n,i=r,c=cr.ONE,f=[];for(let e=zn-2;e>=0;e--){let t=i.square(),s=c.square(),o=s.multiply(3n).multiplyByB(),d=o.multiply(3n),u=i.add(c).square().subtract(s).subtract(t);if(f.push([o.subtract(t),a.square().multiply(3n),u.negate()]),a=t.subtract(d).multiply(a).multiply(i).div(2n),i=t.add(d).div(2n).square().subtract(o.square().multiply(3n)),c=t.multiply(u),Yn(Dn.x,e)){let e=i.subtract(r.multiply(c)),t=a.subtract(n.multiply(c));f.push([e.multiply(n).subtract(t.multiply(r)),e.negate(),t]);let s=t.square(),o=s.multiply(t),d=s.multiply(a),u=o.subtract(d.multiply(2n)).add(e.square().multiply(c));a=t.multiply(u),i=d.subtract(u).multiply(e).subtract(o.multiply(i)),c=c.multiply(o)}}return f}(...this.toAffine())),this._PPRECOMPUTES}}async function ra(e){return e instanceof na?e:na.hashToCurve(e)}na.BASE=new na(cr.fromBigTuple(Dn.G2x),cr.fromBigTuple(Dn.G2y),cr.ONE),na.ZERO=new na(cr.ONE,cr.ONE,cr.ZERO),ta.BASE.calcMultiplyPrecomputes(4);const aa=async({request:e})=>{if("signMessage"===e.method){const{message:t,salt:n}=e.params;if(!await snap.request({method:"snap_dialog",params:{type:Gt.Confirmation,content:At([bt("Signature request"),St("Do you want to sign the following message with snap entropy?"),dt(t)])}}))throw new Ke;const r=await async function(e="Signing key"){return Ce(await snap.request({method:"snap_getEntropy",params:{version:1,salt:e}}))}(n),a=await async function(e,t){const n=await ra(e);n.assertValidity();const r=n.multiply(Qr(t));return e instanceof na?r:r.toSignature()}(Fn(t),r);return _n(a)}throw new He({method:e.method})}})();var a=exports;for(var i in r)a[i]=r[i];r.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();